<!doctype html>
<html lang="ja">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/starter-template/">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>校異源氏物語テキストDB</title>

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <!-- Custom styles for this template -->
    <link href="https://getbootstrap.com/docs/4.3/examples/carousel/carousel.css" rel="stylesheet">
</head>

<body class="pt-0">

    <header>
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
            <a class="navbar-brand" href="index.html">校異源氏物語テキストDB</a>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                  <li class="nav-item active">
                    <a class="nav-link" target="_blank" href="https://genji.dl.itc.u-tokyo.ac.jp/">「デジタル源氏物語」プロジェクト</a>
                  </li>
                  
                </ul>
              </div>
        </nav>

       
    </header>

    <main role="main">

        <!-- Main jumbotron for a primary marketing message or call to action -->
        <div class="jumbotron">
            <div class="container">
                <h1 class="mt-5 display-3">校異源氏物語テキストDB</h1>
                <p class="my-5 lead">
                    『校異源氏物語』のテキストデータを公開するデータベースです。
                </p>
            </div>
        </div>



        <!-- Marketing messaging and featurettes
                ================================================== -->
        <!-- Wrap the rest of the page in another container to center all the content. -->

        <div class="container marketing mt-5">

            <!-- Three columns of text below the carousel -->
            <div class="row">
                <div class="col-lg-4">
                    <img src="https://json-ld.org/images/json-ld-logo.png"
                        class="bd-placeholder-img" height="140" />
                    <!-- <h2 class="mt-5">一覧</h2> -->
                    <p class="mt-3">URIが付与されたテキストデータを一覧する。</p>
                    <!-- <div id="div1"></div> -->
                    
                </div><!-- /.col-lg-4 -->
                <div class="col-lg-4">
                    <img class="bd-placeholder-img" height="140"
                        src="https://pbs.twimg.com/profile_images/596366309601845248/2uaPY5NH_400x400.png" />
                    <!-- <h2 class="mt-5">IIIF & TEI Viewer</h2> -->
                    <p class="mt-3">IIIF画像（国立国会図書館デジタルコレクション）と合わせて閲覧する。</p>
                    <!-- <div id="div2"></div> -->
                </div><!-- /.col-lg-4 -->
                <div class="col-lg-4">
                    <img class="bd-placeholder-img" height="140"
                        src="https://tei-c.org/Vault/MembersMeetings/2013/wp-content/themes/atahualpa/images/header/TEIlogo.png" />
                    <!-- <h2 class="mt-5">TEI/XML</h2> -->
                    <p class="mt-3">TEI/XMLファイルを閲覧する。</p>
                    <!-- <div id="div3"></div> -->
                    
                </div><!-- /.col-lg-4 -->

            </div><!-- /.row -->

            <div class="row featurette">
                <div class="col-md-12">
                    <p class="mt-4" id="main">
                        <table class="table">
                            <tbody></tbody>
                        </table>
                    </p>
                </div>
            </div>

            <div class="row featurette">
                <div class="col-md-12">
                    <h2 class="featurette-heading">お知らせ</h2>
                    <p class="mt-4">
                        <ul class="lead">
                            <li>2020-05-27: 「34 若菜 上」「35 若菜 下」「36 柏木」「44 竹河」「45 橋姫」を追加しました。</li>
                            <li>2020-05-07: 「22 玉鬘」「23 初音」「24 胡蝶」「25 蛍」「26 常夏」「27 篝火」「28 野分」「29 行幸」「30 藤袴」「31 真木柱」「32 梅枝」「33 藤裏葉」「37 横笛」「38 鈴虫」「40 御法」「41 幻」「42 匂宮」「43 紅梅」「54 夢浮橋」を追加しました。</li>
                            <li>2020-04-18: 「12 須磨」「13 明石」「14 澪標」「15 蓬生」「16 関屋」「17 絵合」「18 松風」「19 薄雲」「20 朝顔（槿）」「21 少女」を追加しました。</li>
                            <li>2020-01-19: 「9 葵」「10 賢木」を追加しました。</li>
                            <li>2020-01-06: 「3 空蝉」「4 夕顔」「5 若紫」「6 末摘花」「7 紅葉賀」「8 花宴」「11 花散里」を追加しました。</li>
                            <li>2019-12-25: 「2 帚木」を追加しました。</li>
                            <li>2019-11-29: サイトを公開しました。</li class="lead">
                        </ul>
                    </p>
                </div>
            </div>


            <!-- START THE FEATURETTES -->

            <!-- <hr class="featurette-divider"> -->

            <div class="row featurette">
                <div class="col-md-12">
                    <h2 class="featurette-heading">このサイトについて</h2>
                    <p class="mt-4 lead">
                        国立国会図書館デジタルコレクションで公開されている<a
                            href="http://dl.ndl.go.jp/info:ndljp/pid/3437686">『校異源氏物語』</a>（インターネット公開（保護期間満了））のテキストデータを公開します。テキストデータの作成にあたっては、画像をOCR処理し、人手により確認しています。
                    </p>
                    <p class="lead">また各行にURI（Uniform Resource Identifier）を与え、LOD（Linked Open
                        Data）として公開します。さらに、IIIF画像と関連付けたTEI/XMLファイルも合わせて提供します。
                    </p>
                </div>
            </div>

            <!-- <hr class="featurette-divider"> -->

            <div class="row featurette">
                <div class="col-md-12">
                    <h2 class="featurette-heading">作成者</h2>
                    <p>
                        <ul>
                            <li class="lead"><a href="https://researchmap.jp/tam">田村隆</a>　東京大学大学院総合文化研究科准教授</li>
                            <li class="lead"><a href="https://researchmap.jp/knagasaki">永崎研宣</a>　一般財団法人 人文情報学研究所主席研究員
                            </li>
                            <li class="lead"><a href="https://researchmap.jp/i2k">大向一輝</a>　東京大学大学院人文社会系研究科准教授</li>
                            <li class="lead"><a href="https://researchmap.jp/nakamura.satoru">中村覚</a>　東京大学情報基盤センター助教
                            </li>
                            <li class="lead">東京大学総合図書館職員　有志</li>
                        </ul>
                    </p>
                </div>
            </div>


            <hr class="featurette-divider">

            <!-- /END THE FEATURETTES -->

        </div><!-- /.container -->


        <!-- FOOTER -->
        <footer class="container">
            <p class="float-right"><a href="#">Back to top</a></p>
            <p>
                <small>本データベースはJSPS科研費<a href="https://kaken.nii.ac.jp/grant/KAKENHI-PROJECT-19K20626/">19K20626</a>の助成による成果の一部です。</small>
            </p>
        </footer>
    </main>

    <!-- /.container -->
    <script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script>
        let vols = [
            1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
            11, 12 ,13, 14, 15, 16, 17, 18, 19, 20,
            21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
            31, 32, 33, 
            34, 35, 36, 
            37, 38, 
            // 39, 
            40, 41, 42, 43, 
            44, 45, 
            // 46, 47, 48, 49, 50,
            // 51, 52, 53, 
            54
        ]

        let arr = []

        $.get({
            url: 'https://genji.dl.itc.u-tokyo.ac.jp/data/info.json',
            dataType: 'json', //必須。json形式で返すように設定
        }).done(function(data){
           let selections = data.selections
           for(let i = 0; i < selections.length; i++){
               let members = selections[i].members
               for(let j = 0; j < members.length; j++){
                let member = members[j]
                let vol = member.metadata[0].value
                if(vols.includes(vol)){
                    arr.push({
                        id : vol,
                        label : member.label
                    })
                }
               }
           }

           for(let i = 0; i < arr.length; i++){
            let obj = arr[i]

            let id = obj.id
            let id_ = ("00"+id).slice(-2); // "012"

            let main = $("#main")

            let card = $("<div class='card mb-4' id='"+Number(id)+"'>")
            main.append(card)

            let body = $("<div class='card-body'>")
            card.append(body)

            let row = $("<div class='row'>")
            body.append(row)

            let col = $("<div class='col-md-3 my-2'>")
            row.append(col)
            col.append(obj.id+": "+obj.label)

            //---------------

            col = $("<div class='col-md-3 my-2'>")
            row.append(col)

            let a = $("<a>")
            col.append(a)
            a.attr("href", "https://tei-eaj.github.io/aozora_tei/tools/visualization/cetei/?url=https://w3id.org/kouigenjimonogatari/tei/"+id_+".xml")

            let img = $("<img>")
            a.append(img)
            img.attr("src", "https://json-ld.org/images/json-ld-logo.png")
            img.attr("height", "90px")
            img.attr("class", "bd-placeholder-img")

            //---------------

            col = $("<div class='col-md-3 my-2'>")
            row.append(col)

            a = $("<a>")
            col.append(a)
            a.attr("href", "https://tei-eaj.github.io/aozora_tei/tools/visualization/facs/?url=https://w3id.org/kouigenjimonogatari/tei/"+id_+".xml&textDirection=vertical")

            img = $("<img>")
            a.append(img)
            img.attr("src", "https://pbs.twimg.com/profile_images/596366309601845248/2uaPY5NH_400x400.png")
            img.attr("height", "90px")
            img.attr("class", "bd-placeholder-img")

            //---------------

            col = $("<div class='col-md-3 my-2'>")
            row.append(col)

            a = $("<a>")
            col.append(a)
            a.attr("href", "https://w3id.org/kouigenjimonogatari/tei/"+id_+".xml")

            img = $("<img>")
            a.append(img)
            img.attr("src", "https://tei-c.org/Vault/MembersMeetings/2013/wp-content/themes/atahualpa/images/header/TEIlogo.png")
            img.attr("height", "90px")
            img.attr("class", "bd-placeholder-img")
        }

        }).fail(function(XMLHttpRequest, textStatus, errorThrown){
            alert(errorThrown);
        })
    </script>
</body>

</html>